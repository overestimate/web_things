<!DOCTYPE html>
<head>
    <title>atproto handler tool</title>
    <script>
        let docUrl = new URL(document.URL);
        let newUrl = docUrl.searchParams.get("url");
        if ( newUrl != null) {
            // path set, parse url and redirect
            window.open(new URL(decodeURIComponent(newUrl)), "_self");
        }
        let registerUrl = () => { navigator.registerProtocolHandler('at', `./?url=${link.value}`) }
    </script>
</head>
<body>
    <b>requires js!</b>
    <p>
        this tool registers a handler for the at:// url protocol that simply redirects to your frontend of choice.
        set the link (if you use a site besides bsky.app) and click the Register URL handler button.
    </p>
    <label>generic profile link (add %s where handle should be)</label>
    <input id="link" name="link" type="text" value="https://bsky.app/profile/%s">
    <button name="register" onclick="registerUrl()">Register URL handler</button>
</body>
